<form
  [formGroup]="newTaskForm"
  (ngSubmit)="addTask()"
  autocomplete="off"
  class="form-group"
>
  <h3 class="text-center text-primary">
    <mat-icon>add_task</mat-icon> {{ title }}
  </h3>
  <hr />

  <!-- TASK NAME -->
  <div class="row row-centered">
    <div class="col-6">
      <div class="form-group">
        <span class="p-float-label">
          <p-dropdown
            [options]="taskNames"
            [autoDisplayFirst]="false"
            formControlName="name"
            editable="true"
            optionLabel="name"
            optionValue="name"
            [showClear]="true"
          ></p-dropdown>
          <label for="dropdown">Task</label>
        </span>
      </div>
    </div>
  </div>
  <!-- ESTIM TIME -->
  <div class="row row-centered">
    <div class="col-6">
      <div class="form-group">
        <label>Estimated Time [h]</label>
        <input
          type="number"
          class="form-control"
          formControlName="estimatedTime"
        />
      </div>
    </div>
  </div>
  <!-- ITEM STAGE -->
  <div class="row row-centered">
    <div class="col-6">
      <div class="form-group">
        <label>Stage</label>
        <p-dropdown
          [options]="stages"
          formControlName="itemStage"
          optionLabel="stageName"
          optionValue="stageName"
          [showClear]="true"
        ></p-dropdown>
      </div>
    </div>
  </div>
  <!-- PROJECT -->
  <div class="row row-centered">
    <div class="col-6">
      <div class="form-group">
        <p-dropdown
          [options]="projects"
          styleClass="form-control"
          [filter]="true"
          filterBy="number"
          resetFilterOnHide="true"
          formControlName="projectId"
          [(ngModel)]="selectedProject"
          [showClear]="true"
          placeholder="Project"
          optionValue="projectId"
        >
          <ng-template let-project pTemplate="selectedItem">
            <div
              class="project-item project-item-value"
              *ngIf="selectedProject"
            >
              <div>{{ project.number }} {{ project.name }}</div>
            </div>
          </ng-template>
          <ng-template let-project pTemplate="item">
            <div class="project-item">
              <div>{{ project.number }} {{ project.name }}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
    </div>
  </div>
  <!-- USER -->
  <div class="row row-centered">
    <div class="col-6">
      <div class="form-group">
        <p-dropdown
          [options]="users"
          styleClass="form-control"
          [filter]="true"
          filterBy="firstName"
          resetFilterOnHide="true"
          formControlName="userId"
          [(ngModel)]="selectedUser"
          [showClear]="true"
          placeholder="Assigned to"
          optionValue="id"
        >
          <ng-template let-user pTemplate="selectedItem">
            <div class="user-item user-item-value" *ngIf="selectedUser">
              <div>{{ user.firstName }} {{ user.lastName }}</div>
            </div>
          </ng-template>
          <ng-template let-user pTemplate="item">
            <div class="user-item">
              <div>{{ user.firstName }} {{ user.lastName }}</div>
            </div>
          </ng-template>
        </p-dropdown>
      </div>
    </div>
  </div>

  <!-- BUTTONS -->
  <div class="row row-centered">
    <div class="form-group text-center mt-2">
      <button class="btn btn-success" type="submit">Add</button>
    </div>
  </div>
</form>
