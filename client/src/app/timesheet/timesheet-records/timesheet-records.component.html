<div class="container" *ngIf="weekDetails">

    <h3>total weekly: {{weekDetails.totalWeekly}}
        <button class="btn btn-outline-primary" routerLink="/timesheets" style="float: right;">CARDS</button>
        <button class="btn btn-outline-primary" (click)="backClicked()" style="float: right;">WEEKS</button>
    </h3>


    <hr>
    <form [formGroup]="newTimesheetRecordForm" (ngSubmit)="addNewTimesheetRecord()" class="form-inline"
        style="display: flex;">

        <div class="form-group" style="margin-right: 5px; width: 100px;">
            <label>Time [hrs]</label>
            <input type="number" min="0.25" step="0.50" max="15" class="form-control" formControlName="time" />
        </div>

        <div class="form-group" style="margin-right: 5px; width: 202px;">
            <label>Date</label>
            <input type="date" class="form-control" formControlName="date"
                min="{{weekDetails.startWeek | date:'yyyy-MM-dd'}}" max="{{weekDetails.endWeek | date:'yyyy-MM-dd'}}"
                onkeydown="return false" />
        </div>

        <div class="form-group" style="margin-right: 5px; width: 202px;">
            <label>Project</label>
            <select class="form-select" class="form-control" name="project" formControlName="projectId">
                <option value="">not assigned</option>
                <option *ngFor="let project of projects" value="{{project.projectId}}">{{project.name}}</option>
            </select>
        </div>

        <div class="form-group" style="margin-right: 5px; width: 202px;">
            <label>Work Type</label>
            <select class="form-select" class="form-control" name="workType" formControlName="workTypeId">
                <option *ngFor="let workType of workTypes" value="{{workType.workTypeId}}">{{workType.workTypeName}}
                </option>
            </select>
        </div>

        <button type="submit" class="btn btn-primary mt-4">Add</button>
    </form>

    <!-- <p>CARD: {{cardDetails.customName}} // total time: {{cardDetails.totalTime}}</p> -->

    <div *ngIf="records.length === 0">array is empty</div>

    <!-- <ul class="list-group" *ngFor="let item of records">
        <li class="list-group-item m-1">
            {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
            <button class="btn btn-outline-warning btn-sm" (click)="deleteTimesheetRecord(item.timesheetRecordId)">
                delete
            </button>
        </li>
    </ul> -->

    <mat-tab-group animationDuration="0ms" [selectedIndex]="currentDayNumber">

        <mat-tab label="Monday | total: {{sumHoursByDayName(dayNames[0])}}" class="mat-tab-header">
            <ul class="list-group" *ngFor="let item of records">
                <li *ngIf="item.dayName == dayNames[0]" class="list-group-item m-1">
                    {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
                    <button class="btn btn-outline-warning btn-sm"
                        (click)="deleteTimesheetRecord(item.timesheetRecordId)" style="float: right;">
                        delete
                    </button>
                </li>
            </ul>
        </mat-tab>

        <mat-tab label="Tuesday | total: {{sumHoursByDayName(dayNames[1])}}">
            <ul class="list-group" *ngFor="let item of records">
                <li *ngIf="item.dayName == dayNames[1]" class="list-group-item m-1">
                    {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
                    <button class="btn btn-outline-warning btn-sm"
                        (click)="deleteTimesheetRecord(item.timesheetRecordId)" style="float: right;">
                        delete
                    </button>
                </li>
            </ul>
        </mat-tab>

        <mat-tab label="Wednesday | total: {{sumHoursByDayName(dayNames[2])}}">
            <ul class="list-group" *ngFor="let item of records">
                <li *ngIf="item.dayName == dayNames[2]" class="list-group-item m-1">
                    {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
                    <button class="btn btn-outline-warning btn-sm"
                        (click)="deleteTimesheetRecord(item.timesheetRecordId)" style="float: right;">
                        delete
                    </button>
                </li>
            </ul>
        </mat-tab>

        <mat-tab label="Thursday | total: {{sumHoursByDayName(dayNames[3])}}">
            <ul class="list-group" *ngFor="let item of records">
                <li *ngIf="item.dayName == dayNames[3]" class="list-group-item m-1">
                    {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
                    <button class="btn btn-outline-warning btn-sm"
                        (click)="deleteTimesheetRecord(item.timesheetRecordId)" style="float: right;">
                        delete
                    </button>
                </li>
            </ul>
        </mat-tab>

        <mat-tab label="Friday | total: {{sumHoursByDayName(dayNames[4])}}">
            <ul class="list-group" *ngFor="let item of records">
                <li *ngIf="item.dayName == dayNames[4]" class="list-group-item m-1">
                    {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
                    <button class="btn btn-outline-warning btn-sm"
                        (click)="deleteTimesheetRecord(item.timesheetRecordId)" style="float: right;">
                        delete
                    </button>
                </li>
            </ul>
        </mat-tab>

        <mat-tab label="Saturday | total: {{sumHoursByDayName(dayNames[5])}}">
            <ul class="list-group" *ngFor="let item of records">
                <li *ngIf="item.dayName == dayNames[5]" class="list-group-item m-1">
                    {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
                    <button class="btn btn-outline-warning btn-sm"
                        (click)="deleteTimesheetRecord(item.timesheetRecordId)" style="float: right;">
                        delete
                    </button>
                </li>
            </ul>
        </mat-tab>

        <mat-tab label="Sunday | total: {{sumHoursByDayName(dayNames[6])}}">
            <ul class="list-group" *ngFor="let item of records">
                <li *ngIf="item.dayName == dayNames[6]" class="list-group-item m-1">
                    {{ item.date | date: "dd/MMMM/yyyy" }} // totalHrs: {{item.time}}
                    <button class="btn btn-outline-warning btn-sm"
                        (click)="deleteTimesheetRecord(item.timesheetRecordId)" style="float: right;">
                        delete
                    </button>
                </li>
            </ul>
        </mat-tab>

    </mat-tab-group>



</div>